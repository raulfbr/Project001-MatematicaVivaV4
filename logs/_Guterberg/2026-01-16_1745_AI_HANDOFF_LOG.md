# AI Context Handoff Log - Session: Refining Dashboard & Creating Lesson 004
**Date:** 2026-01-16
**Topic:** Dashboard Styling, Metadata Injection, and Lesson 004 Creation.

## 1. System Architecture Overview
The project is a static site generator ("Forge V3") for "Matem√°tica Viva".
- **Build Script:** `build/forge.py` (Orchestrator).
- **Phase Drivers:** 
  - `build/fases/sementes.py` (Handles YAML -> HTML for lessons).
  - `build/fases/landing.py` (Handles `index.html` generation).
- **Templates:** Jinja2 templates in `site/templates/`.
- **Content:** 
  - Lessons: `curriculo/01_SEMENTESV6/*.yaml`.
  - Books: `curriculo/90_LIVRO_DOURADO/*.md`.

## 2. Key Changes & Decisions

### A. Dashboard (`index.html`) Refinement
**Objective:** Make the dashboard aesthetically pleasing and pedagogically accurate.
**Modifications:**
1.  **Driver (`build/fases/landing.py`):**
    -   **Guardian Mapping:** Implemented a hardcoded map inside `scan_sementes` to link guardian names (e.g., 'celeste') to their animal counterparts (e.g., 'raposa').
        ```python
        guardian_map = {"celeste": "raposa", "bernardo": "urso", ...}
        ```
    -   **Pedagogical Objectives:** Now extracts `objetivo_pedagogico` from YAML metadata and cleans it (removes brackets/prefixes) for display.
    -   **Manual Injection (L000):** Since `MV-S-000_O_PORTAL_DO_REINO.html` is manual (no YAML source), we artificially injected its metadata dictionary into the `lessons` list in `landing.py` so it appears in the index alongside generated lessons.

2.  **Template (`site/templates/index.j2`):**
    -   **Removed:** "Statistics" section (noise).
    -   **Updated:** Card styling for "Objective". Now uses a discreet tag style:
        ```html
        <div class="card-objective" style="..."> <span>üè∑Ô∏è</span> <em>{{ text }}</em> </div>
        ```
    -   **Fixed:** Guardian images now dynamically load based on `licao.guardiao` and `licao.guardiao_animal`.

### B. Golden Books ("Livros Dourados")
**Objective:** "Impeccable" typography and clean Markdown source.
**Modifications:**
1.  **Source (`curriculo/90_LIVRO_DOURADO/901_SANTOS_DUMONT.md`):**
    -   Refactored to Pure Markdown. Removed all inline HTML (`<div class="box">` etc).
    -   Now uses standard MD syntax.
2.  **Template (`site/templates/livro.j2`):**
    -   Heavily upgraded CSS to target semantic Markdown (e.g., `blockquote` for dialogue, specific `div` classes for boxes if utilizing markdown extensions or raw html containers were wrapped). *Note: Ensure future edits respect this "CSS-first" approach.*

### C. Lesson 004 Creation ("A Ordem do Dia")
**Objective:** Introduce ordinality (1st, 2nd...) and Time.
**Files Created:**
-   `curriculo/01_SEMENTESV6/004_A_ORDEM_DO_DIA.yaml`
**Details:**
-   **Guardian:** No√© (Owl).
-   **Tone:** Wise, Patient ("Sabedoria").
-   **Key Fixes:** YAML strings containing colons (e.g., inside dialogue `"Says: Hello"`) MUST be quoted to prevent `mapping values are not allowed` errors.

## 3. Current Status
-   **L000 - L004:** Live and indexed.
-   **Build:** Passing (`python build/forge.py`).
-   **Visuals:** Dashboard cards correctly show specific guardians (Fox, Bear, Bird, Owl) instead of default Lion.

## 4. Known Quirks / Instructions for Next AI
-   **L000 is Special:** Do not try to find a YAML for Lesson 000. It is handled manually in `landing.py` (injection) and the HTML file is static in `site/sementes/`.
-   **YAML Syntax:** When writing lessons, ALWAYS quote strings that might contain colons (`:`), especially in `nota_graca` or scripts.
-   **Forge V3:** Always run `python build/forge.py` to regenerate the site. It is fast and safe.

## 5. Next Steps
-   Proceed to **Lesson 005**.
-   Monitor the "Auditoria QA" section in YAMLs to ensure fidelity.
